{"remainingRequest":"/Users/linhnguyen/Desktop/EasyCook1/easy_cook-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/linhnguyen/Desktop/EasyCook1/easy_cook-frontend/src/components/Header.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/linhnguyen/Desktop/EasyCook1/easy_cook-frontend/src/components/Header.vue","mtime":1621061284955},{"path":"/Users/linhnguyen/Desktop/EasyCook1/easy_cook-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/linhnguyen/Desktop/EasyCook1/easy_cook-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/linhnguyen/Desktop/EasyCook1/easy_cook-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/linhnguyen/Desktop/EasyCook1/easy_cook-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBiYWNrZXIgZnJvbSAiLi4vdXRpbHMvYXhpb3MiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsYXRlc3RQb3N0OiAwLAogICAgICBvbGRBdmF0YXI6ICIiLAogICAgICBuYW1lUG9zdDogIiIsCiAgICAgIGNoYW5nZUF2YXRhcjogZmFsc2UsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbG9hZFBvc3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJzZWFyY2giLCBwYXJhbXM6IHsgc2VhcmNoOiB0aGlzLm5hbWVQb3N0IH19KTsKICAgIH0sCgogICAgYXZhdGFyTmV3OiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuY2hhbmdlQXZhdGFyID0gIXRoaXMuY2hhbmdlQXZhdGFyOwogICAgfSwKICAgIG9uRmlsZTogZnVuY3Rpb24gKGUpIHsKICAgICAgdGhpcy5vbGRBdmF0YXIgPSBlLnRhcmdldC5maWxlc1swXTsKICAgIH0sCiAgICBoYW5kbGU6IGZ1bmN0aW9uICgpIHsKICAgICAgbGV0IGRhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgbGV0IGlkID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5pZDsKICAgICAgZGF0YS5hcHBlbmQoImltYWdlIiwgdGhpcy5vbGRBdmF0YXIpOwoKICAgICAgY29uc3QgY29uZmlnID0gewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICJjb250ZW50LXR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIsCiAgICAgICAgfSwKICAgICAgfTsKCiAgICAgIGJhY2tlcgogICAgICAgIC5wb3N0KCJhdmF0YXIvIiArIGlkLCBkYXRhLCBjb25maWcpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAibG9naW4iIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvci5yZXNwb25zZS5kYXRhOwogICAgICAgIH0pOwogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICB1c2VybmFtZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIubmFtZTsKICAgIH0sCiAgICBhdmF0YXIoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmltYWdlOwogICAgfSwKICAgIGFkbWluKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5yb2xlOwogICAgfSwKICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikpIHsKICAgICAgYmFja2VyLmdldCgiaW5mbyIpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzKSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyID0gcmVzcG9uc2UuZGF0YS51c2VyOwogICAgICB9KTsKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["Header.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Header.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <header>\n    <b-navbar toggleable=\"lg\" type=\"light\" variant=\"light\">\n      <div class=\"container\">\n        <b-navbar-brand>\n          <router-link to=\"/\">\n            <img src=\"../assets/logo.png\" height=\"40px\" alt=\"\" />\n          </router-link>\n        </b-navbar-brand>\n\n        <b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\n\n        <b-collapse id=\"nav-collapse\" is-nav>\n          <b-navbar-nav class=\"mr-auto\">\n            <div class=\"input-group\">\n              <input type=\"text\" class=\"form-control\" v-model=\"namePost\" />\n              <div class=\"input-group-append\">\n                <span class=\"btn btn-success\" @click=\"loadPost(namePost, 10)\">\n                  Tìm kiếm\n                </span>\n              </div>\n            </div>\n          </b-navbar-nav>\n\n          <b-navbar-nav class=\"ml-auto\">\n            <div v-if=\"admin == 'admin'\">\n              <router-link\n                class=\"btn btn-info rounded-pill m-2\"\n                to=\"/create\"\n              >\n                <b-icon icon=\"arrow-up-right-square\" />\n                Công thức\n              </router-link>\n              <router-link\n                class=\"btn btn-info rounded-pill m-2\"\n                to=\"/dashboard\"\n              >\n                <b-icon icon=\"joystick\" />\n                Quản lý\n              </router-link>\n            </div>\n            <div v-if=\"username\">\n              <b-nav-item-dropdown right>\n                <template #button-content>\n                  <img\n                    :src=\"avatar\"\n                    class=\"rounded-circle\"\n                    alt=\"\"\n                    height=\"40px\"\n                    width=\"40px\"\n                  />\n                  {{ username }}\n                </template>\n                <b-dropdown-item v-if=\"admin == 'admin'\"> </b-dropdown-item>\n                <b-dropdown-item>\n                  <b-icon icon=\"person-lines-fill\" />\n                  <span class=\"text-primary\" @click.prevent=\"avatarNew\">\n                    Ảnh đại diện</span\n                  >\n                </b-dropdown-item>\n                <b-dropdown-item>\n                  <b-icon icon=\"heart-fill\" />\n                  <router-link to=\"/love\"> Yêu thích </router-link>\n                </b-dropdown-item>\n                <b-dropdown-item>\n                  <b-icon icon=\"box-arrow-in-right\" />\n                  <router-link class=\"text-danger\" to=\"/logout\">\n                    Đăng xuất\n                  </router-link>\n                </b-dropdown-item>\n              </b-nav-item-dropdown>\n            </div>\n            <div v-else>\n              <router-link class=\"btn btn-outline-primary m-2\" to=\"/register\">\n                Đăng ký\n              </router-link>\n              <router-link class=\"btn btn-danger\" to=\"/login\">\n                Đăng nhập\n              </router-link>\n            </div>\n          </b-navbar-nav>\n        </b-collapse>\n      </div>\n    </b-navbar>\n    <div v-if=\"changeAvatar\" class=\"avatar\">\n      <form class=\"avatar-content animate\" @submit.prevent=\"handle()\">\n        <div class=\"container-avatar\">\n          <label><b>Ảnh đại diện</b></label>\n\n          <input\n            type=\"file\"\n            name=\"image\"\n            class=\"form-control-file\"\n            @change=\"onFile\"\n          />\n          <br />\n          <button type=\"submit\" class=\"btn btn-success\">Thay đổi</button>\n        </div>\n        <em>Vui lòng chọn ảnh có dung lượng nhỏ hơn 1MB.</em>\n\n        <div class=\"container-avatar\" style=\"background-color: #f1f1f1\">\n          <button type=\"button\" class=\"btn btn-danger\" @click=\"avatarNew\">\n            Hủy bỏ\n          </button>\n        </div>\n      </form>\n    </div>\n  </header>\n</template>\n\n<script>\nimport backer from \"../utils/axios\";\n\nexport default {\n  data() {\n    return {\n      latestPost: 0,\n      oldAvatar: \"\",\n      namePost: \"\",\n      changeAvatar: false,\n    };\n  },\n  methods: {\n    loadPost: function () {\n        this.$router.push({ name: \"search\", params: { search: this.namePost }});\n    },\n\n    avatarNew: function () {\n      this.changeAvatar = !this.changeAvatar;\n    },\n    onFile: function (e) {\n      this.oldAvatar = e.target.files[0];\n    },\n    handle: function () {\n      let data = new FormData();\n      let id = this.$store.state.user.id;\n      data.append(\"image\", this.oldAvatar);\n\n      const config = {\n        headers: {\n          \"content-type\": \"multipart/form-data\",\n        },\n      };\n\n      backer\n        .post(\"avatar/\" + id, data, config)\n        .then((response) => {\n          if (response.data.status) {\n            this.$router.push({ name: \"login\" });\n          }\n        })\n        .catch((error) => {\n          this.errors = error.response.data;\n        });\n    },\n  },\n  computed: {\n    username() {\n      return this.$store.state.user.name;\n    },\n    avatar() {\n      return this.$store.state.user.image;\n    },\n    admin() {\n      return this.$store.state.user.role;\n    },\n  },\n  async mounted() {\n    if (localStorage.getItem(\"token\")) {\n      backer.get(\"info\").then((response) => {\n        if (response.data.status) this.$store.state.user = response.data.user;\n      });\n    }\n  },\n};\n</script>\n\n<style scoped>\n.avatar {\n  position: fixed;\n  z-index: 1000;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: rgb(0, 0, 0);\n  background-color: rgba(0, 0, 0, 0.4);\n  padding-top: 60px;\n}\n.container-avatar {\n  padding: 16px;\n}\n.avatar-content {\n  background-color: #fefefe;\n  margin: 5% auto 15% auto; /* 5% from the top, 15% from the bottom and centered */\n  border: 1px solid #888;\n  width: 80%; /* Could be more or less, depending on screen size */\n}\n\n.animate {\n  -webkit-animation: animatezoom 0.6s;\n  animation: animatezoom 0.6s;\n}\n\n@-webkit-keyframes animatezoom {\n  from {\n    -webkit-transform: scale(0);\n  }\n  to {\n    -webkit-transform: scale(1);\n  }\n}\n\n@keyframes animatezoom {\n  from {\n    transform: scale(0);\n  }\n  to {\n    transform: scale(1);\n  }\n}\n</style>"]}]}